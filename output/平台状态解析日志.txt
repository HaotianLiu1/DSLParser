==================================================
ğŸ“‚ å¼€å§‹è§£æä»»åŠ¡: å¹³å°çŠ¶æ€.dsl
ğŸ•’ æ—¶é—´: Thu Dec 18 16:32:28 CST 2025
--------------------------------------------------
â„¹ï¸ è¯†åˆ«æ¨¡å¼: åŠŸèƒ½æ¨¡å‹ (Function Model)
âœ… è¯­æ³•è§£æé€šè¿‡ (Zero Syntax Errors)

--- [Visitor æ•°æ®æå–ç»“æœ] ---
=== è§£æåŠŸèƒ½æ¨¡å‹: Link16_Platform_System_Status ===
  [å‘ç°å‚ä¸è€…] åç§°: Own_Unit, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: C2_JU_A, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: C2_JU_B, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: Reporting_JU, ç±»å‹: GENERIC_PLATFORM
  [å‘ç°å‚ä¸è€…] åç§°: Controlled_Unit, ç±»å‹: GENERIC_PLATFORM
  [å‘ç°å‚ä¸è€…] åç§°: Receiving_JU, ç±»å‹: GENERIC_PLATFORM
  [å‘ç°å‚ä¸è€…] åç§°: Operator_A, ç±»å‹: GENERIC_PLATFORM
  [å‘ç°å‚ä¸è€…] åç§°: Operator, ç±»å‹: NON_IU
  [å‘ç°å‚ä¸è€…] åç§°: System_Log, ç±»å‹: NON_IU

[é™æ€å®šä¹‰] æ¶ˆæ¯åˆ—è¡¨ (MESSAGES):
  - J13.X
  - J7.1
  - J10.5

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: J7_1_Action
  |-- DataUpdateRequestByTN =1 ("Data Update Request by TN")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: J13_Stores_Type
  |-- NoStatement =0 ("No Statement")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: J13_Stores_Number
  |-- NoStatement =63 ("No Statement")

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Unit_Control_Map (ç±»å‹: DICTIONARY)

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Unit_Status_Cache (ç±»å‹: DICTIONARY)

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Proxy_Report_Status (ç±»å‹: DICTIONARY)

[è§£ææµç¨‹] Core_Manage_Platform_System_Status (Manages all scenarios (reporting, requesting, monitoring, and receiving) for platform status.)
    [è§¦å‘æ¡ä»¶] "JU Enters Network"OR"JU Status Significant Change"OR"Periodic Status Report Timer Expired"ORMESSAGE_RECEIVEDJ7.1FROMC2_JU_AOR"Status_Data_Required"OR"Control_Assumed"ORMESSAGE_RECEIVEDJ13.XFROMReporting_JU
    [é€»è¾‘åˆ¤æ–­] IF "JU Enters Network"OR"JU Status Significant Change"OR"Periodic Status Report Timer Expired"ORMESSAGE_RECEIVEDJ7.1(Reference_TN==Reporting_JU.TN)FROMC2_JU_A
      |--     [é€»è¾‘åˆ¤æ–­] IF "Trigger was RECEIVED J7.1"AND(Reporting_JU.Type!="C2_JU")
      |--     -> æ­¥éª¤: æè¿°: "J7.1 request received, but unit is not C2. Ignoring trigger."
      |--       |-- -> èµ‹å€¼æ“ä½œ: My_Status_Data = "Get_Own_Platform_Status()"
      |--     -> æ­¥éª¤: æè¿°: "Broadcasting own J13 status."
      |-- è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage
    [é€»è¾‘åˆ¤æ–­] ELSE IF "Status_Data_Required"
      |-- -> èµ‹å€¼æ“ä½œ: Req_Type = "Get_Requirement_Type_From_Event()"
      |-- -> èµ‹å€¼æ“ä½œ: Req_TN = "Get_Requirement_TN_From_Event()"
      |--     [é€»è¾‘åˆ¤æ–­] IF Req_Type=="Controlled_Air_Track"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Request_Controlled_Unit_Status
    [é€»è¾‘åˆ¤æ–­] ELSE IF Req_Type=="C2_JU_Itself"
      |-- -> èµ‹å€¼æ“ä½œ: Target_C2_Actor = "Get_Actor_By_TN(Req_TN)"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Request_C2_Unit_Status
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: æè¿°: "Invalid requirement type."
      |--     [é€»è¾‘åˆ¤æ–­] ELSE IF "Control_Assumed"
      |-- -> èµ‹å€¼æ“ä½œ: Subject_JU = "Get_Controlled_Unit_From_Event()"
      |--     [é€»è¾‘åˆ¤æ–­] IF Subject_JU.Reports_Own_Status==FALSEOR"Subject_JU.Is_In_Radio_Silence == TRUE"
      |--     -> æ­¥éª¤: æè¿°: "Scenario 3A/C: Unit not self-reporting or in silence. Starting proxy reporting."
      |-- è°ƒç”¨å­æµç¨‹: Sub_Manage_Proxy_Reporting
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: æè¿°: "Scenario 3B/C: Unit is self-reporting. Starting monitoring watchdog."
      |-- -> èµ‹å€¼æ“ä½œ: Watchdog_Timer_ID = "Generate_Timer_ID(Subject_JU.TN)"
      |-- -> èµ‹å€¼æ“ä½œ: Update_Period = "Get_Expected_J13_Update_Period()"
      |--       |--     [é€»è¾‘åˆ¤æ–­] ELSE IF MESSAGE_RECEIVEDJ13.XFROMReporting_JU
      |-- -> èµ‹å€¼æ“ä½œ: Received_Msg_Data = "Extract_Message_Data()"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Process_Received_J13_Status

[è§£ææµç¨‹] Sub_Request_Controlled_Unit_Status (Handles Scenario 2A: Requesting status of a controlled air track from its controller.)
    (å‚æ•°å®šä¹‰: (Requester:STRING,Target_Controlled_TN:INTEGER))
-> èµ‹å€¼æ“ä½œ: Controller_TN = Unit_Control_Map.get(TN=Target_Controlled_TN)
    [é€»è¾‘åˆ¤æ–­] IF Controller_TN==NULL
      |--     -> æ­¥éª¤: æè¿°: "Log error: Cannot request status, controller for TN is unknown."
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |-- -> èµ‹å€¼æ“ä½œ: C2_JU_B = "Get_Actor_By_TN(Controller_TN)"
-> èµ‹å€¼æ“ä½œ: Msg_Params = {DataUpdateRequestAction=J7_1_Action.DataUpdateRequestByTN,Reference_TN=Target_Controlled_TN}
è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage

[è§£ææµç¨‹] Sub_Request_C2_Unit_Status (Handles Scenario 2B: Requesting status of another C2 JU itself.)
    (å‚æ•°å®šä¹‰: (Requester:STRING,Target_C2_JU:STRING))
-> èµ‹å€¼æ“ä½œ: Msg_Params = {DataUpdateRequestAction=J7_1_Action.DataUpdateRequestByTN,Reference_TN=Target_C2_JU.TN}
è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage

[è§£ææµç¨‹] Sub_Manage_Proxy_Reporting (Handles Scenario 3 (Cases A, B, or C Action): C2 JU starts and maintains periodic proxy reporting.)
    (å‚æ•°å®šä¹‰: (Controller:STRING,Subject_JU:STRING,Reason:STRING))
è°ƒç”¨å­æµç¨‹: Proxy_Report_Status.set
    -> æ­¥éª¤: æè¿°: "Proxy reporting loop starting for unit."
-> èµ‹å€¼æ“ä½œ: Initial_Status_Data = "Get_Local_Data_For_Unit(Subject_JU)"
è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage

[è§£ææµç¨‹] Sub_Stop_Proxy_Reporting (Stops the proxy reporting for a specific unit.)
    (å‚æ•°å®šä¹‰: (Controller:STRING,Subject_JU:STRING))
è°ƒç”¨å­æµç¨‹: Proxy_Report_Status.set
    -> æ­¥éª¤: æè¿°: "C2 JU shall cease its reporting."

[è§£ææµç¨‹] Sub_Process_Received_J13_Status (Handles Rule 1: Data conflict resolution for incoming J13 messages.)
    (å‚æ•°å®šä¹‰: (Receiver:STRING,Sender:STRING,Received_Msg:DICTIONARY))
-> èµ‹å€¼æ“ä½œ: Target_TN = Received_Msg.Reference_TN
-> èµ‹å€¼æ“ä½œ: New_Data = Received_Msg.Status_Data
-> èµ‹å€¼æ“ä½œ: New_Priority = 99
    [é€»è¾‘åˆ¤æ–­] IF Sender.TN==Target_TN
      |-- -> èµ‹å€¼æ“ä½œ: New_Priority = 1
    [é€»è¾‘åˆ¤æ–­] ELSE IF Unit_Control_Map.get(TN=Target_TN)==Sender.TN
      |-- -> èµ‹å€¼æ“ä½œ: New_Priority = 2
-> èµ‹å€¼æ“ä½œ: Current_Entry = Unit_Status_Cache.get(TN=Target_TN)
    [é€»è¾‘åˆ¤æ–­] IF Current_Entry==NULLORNew_Priority<=Current_Entry.Priority
      |--     -> æ­¥éª¤: æè¿°: "Accepting new J13 data based on priority rules."
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Update_Status_Cache
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: æè¿°: "Discarding new J13 data; existing data has higher priority."
      |-- 
[è§£ææµç¨‹] Rule_J13_Voice_Channel_Content (Describes Rule 2: Content specification for J13 Voice Group A and B channels.)
    (å‚æ•°å®šä¹‰: ())
    -> æ­¥éª¤: æè¿°: "When populating J13 Platform and System Status messages, the Voice Group A and B Channels fields SHALL be the channels on which the Reference TN (the unit being reported on) is operating."

[è§£ææµç¨‹] Rule_Interpret_J13_Stores (Describes Rule 3: Interpretation logic for J13.2C2 and J13.2C7 stores data.)
    (å‚æ•°å®šä¹‰: (Type_of_Stores:INTEGER,Number_of_Stores:INTEGER))
    [é€»è¾‘åˆ¤æ–­] IF Type_of_Stores!=J13_Stores_Type.NoStatementANDNumber_of_Stores!=J13_Stores_Number.NoStatement
      |--     -> æ­¥éª¤: æè¿°: "INTERPRETATION: Reports the aircraft's current specific onboard inventory (0 to 62 units) of that Type of Stores."
    [é€»è¾‘åˆ¤æ–­] ELSE IF Type_of_Stores!=J13_Stores_Type.NoStatementANDNumber_of_Stores==J13_Stores_Number.NoStatement
      |--     -> æ­¥éª¤: æè¿°: "INTERPRETATION: That Type of Stores is currently carried, but no data is reported about the number."
    [é€»è¾‘åˆ¤æ–­] ELSE IF Type_of_Stores==J13_Stores_Type.NoStatementANDNumber_of_Stores!=J13_Stores_Number.NoStatement
      |--     -> æ­¥éª¤: æè¿°: "INTERPRETATION: Reports the specific onboard inventory of an unspecified type of weapon."
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: æè¿°: "INTERPRETATION: No data is reported."

[è§£ææµç¨‹] Atomic_Update_Status_Cache (Updates the local status cache for a specific track.)
    (å‚æ•°å®šä¹‰: (Target_TN:INTEGER,New_Data:DICTIONARY,Source_TN:INTEGER,Priority:INTEGER))
-> èµ‹å€¼æ“ä½œ: Cache_Entry = {StatusData=New_Data,Source_TN=Source_TN,Priority=Priority}
è°ƒç”¨å­æµç¨‹: Unit_Status_Cache.set
    -> æ­¥éª¤: æè¿°: "Notify local systems that track status has been updated."

[è§£ææµç¨‹] Atomic_Alert_Operator (Sends an alert to the operator of a specific actor/system.)
    (å‚æ•°å®šä¹‰: (Recipient:STRING,Message:STRING))
    -> æ­¥éª¤: Own_UnitNOTIFYMessageTORecipient
------------------------------

ğŸ‰ æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼
   - å¯è§†åŒ–å›¾: E:\lht\æ¨¡å‹è½¬æ¢\DSLParser\output\å¹³å°çŠ¶æ€.svg
   - è¯¦ç»†æ—¥å¿—: output/å¹³å°çŠ¶æ€è§£ææ—¥å¿—.txt

