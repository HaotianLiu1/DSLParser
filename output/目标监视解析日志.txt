==================================================
ğŸ“‚ å¼€å§‹è§£æä»»åŠ¡: ç›®æ ‡ç›‘è§†.dsl
ğŸ•’ æ—¶é—´: Thu Dec 18 17:27:25 CST 2025
--------------------------------------------------
â„¹ï¸ è¯†åˆ«æ¨¡å¼: åŠŸèƒ½æ¨¡å‹ (Function Model)
âœ… è¯­æ³•è§£æé€šè¿‡ (Zero Syntax Errors)

--- [Visitor æ•°æ®æå–ç»“æœ] ---
=== è§£æåŠŸèƒ½æ¨¡å‹: Track_Correlation_And_Decorrelation ===
  [å‘ç°å‚ä¸è€…] åç§°: Own_Unit, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: Remote_Unit, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: Operator, ç±»å‹: NON_IU

[é™æ€å®šä¹‰] æ¶ˆæ¯åˆ—è¡¨ (MESSAGES):
  - J2.0
  - J2.2
  - J2.3
  - J3.2
  - J3.3
  - J7.0
  - J7.2
  - J7.4
  - J9.0
  - J10.2
  - J10.3
  - J10.5
  - J10.6
  - J12.0
  - J12.5
  - J12.6

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: TentativeCorrelationFlag (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: DroppedTN_AwaitingAck (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: CorrelationRetryLockout (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: DecorrelationPendingFlag (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: CorrelationExecuted (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: DroppedTN (ç±»å‹: INTEGER) é»˜è®¤å€¼ = 0

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: RetainedTN (ç±»å‹: INTEGER) é»˜è®¤å€¼ = 0

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: PhysicalTestPassed (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Generated_New_TN (ç±»å‹: INTEGER) é»˜è®¤å€¼ = 0

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: MatchedRemoteTN (ç±»å‹: INTEGER) é»˜è®¤å€¼ = 0

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: TentativeTrackTN (ç±»å‹: INTEGER) é»˜è®¤å€¼ = 0

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: HasProhibitions (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: HasRestrictions (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[è§£ææµç¨‹] Core_TrackCorrelation (The top-level process for handling all track correlation activities.)
    [è§¦å‘æ¡ä»¶] MESSAGE_RECEIVEDJ3.2FROMRemote_UnitORMESSAGE_RECEIVEDJ3.3FROMRemote_UnitORMESSAGE_RECEIVEDJ2.XFROMRemote_UnitOR"Own_Unit prepares to transmit local track"OR"Operator requests manual correlation"
    [é€»è¾‘åˆ¤æ–­] IF "Trigger is Operator manual request"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Handle_Manual_Correlation
    [é€»è¾‘åˆ¤æ–­] ELSE IF "Trigger is RECEIVES J3.2"OR"Trigger is RECEIVES J3.3"OR"Trigger is RECEIVES J2.X"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Manage_Automatic_Correlation_Process
    [é€»è¾‘åˆ¤æ–­] ELSE IF "Trigger is Own_Unit prepares to transmit local track"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Manage_Automatic_Correlation_Process
      |--     [é€»è¾‘åˆ¤æ–­] IF CorrelationExecuted==FALSE
      |-- è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage
    [é€»è¾‘åˆ¤æ–­] ELSE
      |-- 
[è§£ææµç¨‹] Core_TrackDecorrelation (The top-level process for handling all track decorrelation activities.)
    [è§¦å‘æ¡ä»¶] MESSAGE_RECEIVEDJ2.X(IsCommonLocalTrack==TRUE)FROMRemote_UnitORMESSAGE_RECEIVEDJ3.X(IsCommonLocalTrack==TRUE)FROMRemote_UnitOR"Operator requests manual decorrelation"
    [é€»è¾‘åˆ¤æ–­] IF "Trigger is Operator manual request"
      |-- è°ƒç”¨å­æµç¨‹: Sub_ExecuteDecorrelation
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     [é€»è¾‘åˆ¤æ–­] IF IsRemoteTrackOutsideDecorrelationWindow==TRUE
      |-- è°ƒç”¨å­æµç¨‹: Sub_ExecuteDecorrelation
    [é€»è¾‘åˆ¤æ–­] ELSE
      |-- 
[è§£ææµç¨‹] Sub_Manage_Automatic_Correlation_Process (Manages the entire two-step automatic correlation process.)
è°ƒç”¨å­æµç¨‹: Sub_PerformCorrelationTest
    [é€»è¾‘åˆ¤æ–­] IF TentativeCorrelationFlag==TRUE
      |-- 
[è§£ææµç¨‹] Sub_Handle_Manual_Correlation (Handles the process for manually initiated correlation.)
    [é€»è¾‘åˆ¤æ–­] IF (Track1.E_C!=Track2.E_C)OR(Track1.Simulated!=Track2.Simulated)OR(Track1.IsRemote==TRUEANDTrack2.IsRemote==TRUE)
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Notify_Correlation_Prohibited
      |-- è°ƒç”¨å­æµç¨‹: Sub_ExecuteFinalCorrelation

[è§£ææµç¨‹] Sub_PerformCorrelationTest (Performs a single round of correlation testing.)
    (å‚æ•°å®šä¹‰: (AttemptType:STRING))
è°ƒç”¨å­æµç¨‹: Atomic_CheckCorrelationProhibitions
    [é€»è¾‘åˆ¤æ–­] IF HasProhibitions==TRUE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_CheckCorrelationRestrictions
    [é€»è¾‘åˆ¤æ–­] IF HasRestrictions==TRUE
      |--     [é€»è¾‘åˆ¤æ–­] IF (Context.Track_A.IsTargetInOwnUnitJ102==TRUEANDContext.Track_A.IDIN("Unknown","Hostile")ANDContext.Track_B.ID=="Friend")OR(Context.Track_B.IsTargetInOwnUnitJ102==TRUEANDContext.Track_B.IDIN("Unknown","Hostile")ANDContext.Track_A.ID=="Friend")
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"INFO: Engagement exception rule applied. Overriding correlation restriction."TOOperator
      |-- è°ƒç”¨å­æµç¨‹: Atomic_PerformPhysicalCorrelationTests
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"Automatic correlation restricted. Please review."TOOperator
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_PerformPhysicalCorrelationTests
    [é€»è¾‘åˆ¤æ–­] IF PhysicalTestPassed==TRUE
      |--     [é€»è¾‘åˆ¤æ–­] IF AttemptType=="First Attempt"
      |-- -> èµ‹å€¼æ“ä½œ: TentativeCorrelationFlag = TRUE
    [é€»è¾‘åˆ¤æ–­] ELSE
      |-- -> èµ‹å€¼æ“ä½œ: TentativeCorrelationFlag = FALSE

[è§£ææµç¨‹] Sub_ExecuteFinalCorrelation (Selects dropped TN, and executes the correct drop or correlation request procedure.)
è°ƒç”¨å­æµç¨‹: Sub_SelectDroppedTN
    [é€»è¾‘åˆ¤æ–­] IF Own_Unit.HasR2ForDroppedTN==TRUE
      |-- è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage
      |-- -> èµ‹å€¼æ“ä½œ: DroppedTN_AwaitingAck = TRUE
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |-- è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Retain Dropped TN as a remote track after initiating J7.2.";DESCRIPTION"In accordance with MIL-STD-6016B 4.4.4.3.1k(1)(c), the Dropped TN shall be retained as a remote track while awaiting the drop confirmation from the responsible unit.";}
      |-- 
[è§£ææµç¨‹] Sub_SelectDroppedTN (Selects the track number to be dropped based on standard rules.)
    [é€»è¾‘åˆ¤æ–­] IF (Context.IsEngagementExceptionActive==TRUE)
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Force select the Unknown/Hostile track to be dropped.";DESCRIPTION"In accordance with the engagement exception rule, the track with the ID of Unknown or Hostile shall be selected as the Dropped TN.";}
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     [é€»è¾‘åˆ¤æ–­] IF TrackA.HasOCC==TRUEANDTrackB.HasOCC==FALSE
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Assign Track B as the Dropped TN.";DESCRIPTION"Track B is selected to be dropped as it does not have an Operational Contingency Constraint, while Track A does.";}
    [é€»è¾‘åˆ¤æ–­] ELSE IF TrackA.HasOCC==FALSEANDTrackB.HasOCC==TRUE
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Assign Track A as the Dropped TN.";DESCRIPTION"Track A is selected to be dropped as it does not have an Operational Contingency Constraint, while Track B does.";}
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Determine effective track numbers for comparison.";DESCRIPTION"The effective track number for each track will be determined, using the value greater than 07777 if it is reported via a J7.4 message.";}
      |--     [é€»è¾‘åˆ¤æ–­] IF Get_Effective_TN(Track=TrackA)>Get_Effective_TN(Track=TrackB)
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Assign Track A as the Dropped TN.";DESCRIPTION"Track A is selected to be dropped as its effective track number is higher.";}
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Assign Track B as the Dropped TN.";DESCRIPTION"Track B is selected to be dropped as its effective track number is higher or equal.";}

[è§£ææµç¨‹] Sub_MigrateDataFromDroppedTN (Transfers specified data from the dropped TN to the retained TN.)
    -> æ­¥éª¤: Own_UnitNOTIFY"Correlation successful. Data migration complete."TOOperator

[è§£ææµç¨‹] Sub_ExecuteDecorrelation (Executes the decorrelation by splitting tracks and handling special conditions.)
è°ƒç”¨å­æµç¨‹: Sub_PerformCorrelationTest
    [é€»è¾‘åˆ¤æ–­] IF TentativeCorrelationFlag==FALSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_AssignNewTN
      |-- -> èµ‹å€¼æ“ä½œ: NewTN = Generated_New_TN
      |-- è°ƒç”¨å­æµç¨‹: Link16_Control_Handover_Detailed.Sub_SendMessage
      |-- è°ƒç”¨å­æµç¨‹: Atomic_EstablishOriginalTNAsRemote
      |-- è°ƒç”¨å­æµç¨‹: Sub_HandleDecorrelationSpecialConditions
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"Decorrelation aborted. New correlation candidate found."TOOperator
      |-- è°ƒç”¨å­æµç¨‹: Atomic_EstablishOriginalTNAsRemote
      |-- è°ƒç”¨å­æµç¨‹: Sub_ExecuteFinalCorrelation

[è§£ææµç¨‹] Sub_HandleDecorrelationSpecialConditions (Checks and alerts operator for various operational contingencies during decorrelation.)
    [é€»è¾‘åˆ¤æ–­] IF Track_A.IsInEngagement==TRUE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"ALERT: Decorrelated track TN A is in an active engagement. Transmit J10.2 with status 'Engagement Broken' if appropriate."TOOperator
    [é€»è¾‘åˆ¤æ–­] IF Track_A.HasPendingCommand==TRUE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"INFO: Decorrelated track TN A has a pending J9.0 command. Display new status for both TN A and TN B before replying."TOOperator
    [é€»è¾‘åˆ¤æ–­] IF Track_A.IsControlledByOwnUnit==TRUEANDTrack_A.TargetIsC2_JU==TRUE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"MANUAL ACTION REQUIRED: Decorrelation of controlled track TN A requires manual confirmation. Automatic decorrelation inhibited."TOOperator
      |--     [é€»è¾‘åˆ¤æ–­] ELSE IF Track_A.IsControlledByOwnUnit==TRUEANDTrack_A.TargetIsC2_JU==FALSE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"INFO: Decorrelated track TN A (non-C2 JU) control report will be maintained."TOOperator
    [é€»è¾‘åˆ¤æ–­] IF Track_A.IsPaired==TRUE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"ALERT: Decorrelated track TN A is paired. Terminate pairing on TN A and initiate on TN B if appropriate."TOOperator
    [é€»è¾‘åˆ¤æ–­] IF Track_A.HasIndexNumber==TRUE
      |--     -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Assess and re-assign Index Number.";ACTORSOwn_Unit,Operator;DATA_CONTEXT"J12.5 message associated with TN A.";DESCRIPTION"Assess whether the Index Number should remain with TN A or be transferred to TN B, and transmit J12.5 messages as appropriate.";}
    [é€»è¾‘åˆ¤æ–­] IF Track_A.IsInHandover==TRUE
      |-- -> èµ‹å€¼æ“ä½œ: DecorrelationPendingFlag = TRUE
      |--     -> æ­¥éª¤: Own_UnitNOTIFY"INFO: Decorrelation is delayed until handover of TN A is complete or terminated. Status is 'Pending Decorrelation'."TOOperator
      |-- 
[è§£ææµç¨‹] Atomic_Notify_Correlation_Prohibited (Notifies the operator that a correlation action was prohibited.)
    (å‚æ•°å®šä¹‰: (Reason:STRING))
    -> æ­¥éª¤: Own_UnitNOTIFY"Correlation is prohibited for the selected tracks."TOOperator

[è§£ææµç¨‹] Atomic_CheckCorrelationProhibitions (Checks absolute prohibitions for automatic correlation.)
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Check for conditions that absolutely forbid correlation.";DESCRIPTION"Verify that tracks do not have TQ <= e, are not of different E/C, and are not a mix of simulated and live tracks. The global state 'HasProhibitions' is updated to true if any prohibition is found, otherwise false.";}

[è§£ææµç¨‹] Atomic_CheckCorrelationRestrictions (Checks non-absolute restrictions for automatic correlation.)
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Check for conditions that restrict automatic correlation.";DESCRIPTION"Verify that tracks do not have conflicting IDs, different Mode II codes, are not both local, have strength > 1, have R2 conflicts, or are under Operational Contingency Constraints (OCCs). The global state 'HasRestrictions' is updated to true if any restriction is found, otherwise false.";}

[è§£ææµç¨‹] Atomic_PerformPhysicalCorrelationTests (Performs positional, velocity, and altitude tests.)
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Execute kinematic and positional tests.";DESCRIPTION"Compare the position, velocity, and altitude of the local and remote tracks against the criteria defined in MIL-STD-6016B, paragraphs 4.4.4.3.1f(3) through 4.4.4.3.1f(8).";}

[è§£ææµç¨‹] Atomic_TransferKinematicData (Transfers kinematic data from dropped to retained TN.)
    -> æ­¥éª¤: æè¿°: "Transfer Latitude, Longitude, Course, Speed, Altitude, TQ, and Strength."

[è§£ææµç¨‹] Atomic_TransferIdentificationData (Transfers identification data.)
    -> æ­¥éª¤: æè¿°: "Transfer ID, Platform, Activity, etc., based on restriction inhibition status."

[è§£ææµç¨‹] Atomic_TransferIFF_SIF_Data (Transfers IFF/SIF data.)
    -> æ­¥éª¤: æè¿°: "Transfer non-zero Mode I/II/III data and higher value Mode IV data."

[è§£ææµç¨‹] Atomic_TransferIndicatorData (Transfers Force Tell and Emergency indicators.)
    -> æ­¥éª¤: æè¿°: "Transfer Force Tell and Emergency indicators if set to 1 on dropped TN."

[è§£ææµç¨‹] Atomic_AssignNewTN (Assigns a new TN to a local track and returns it.)
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Generate and assign a unique new Track Number.";DESCRIPTION"The system generates a unique track number not currently in use and assigns it to the newly decorrelated local track. The resulting TN is provided via the global state 'Generated_New_TN' for retrieval.";}

[è§£ææµç¨‹] Atomic_EstablishOriginalTNAsRemote (Sets the original track as a remote track.)
    -> æ­¥éª¤: æè¿°: "Establish TN A as a remote track in the local system."
------------------------------

ğŸ‰ æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼
   - å¯è§†åŒ–å›¾: E:\lht\æ¨¡å‹è½¬æ¢\DSLParser\output\ç›®æ ‡ç›‘è§†.svg
   - è¯¦ç»†æ—¥å¿—: output/ç›®æ ‡ç›‘è§†è§£ææ—¥å¿—.txt

