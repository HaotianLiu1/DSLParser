==================================================
ğŸ“‚ å¼€å§‹è§£æä»»åŠ¡: æ­¦å™¨ååŒ.dsl
ğŸ•’ æ—¶é—´: Thu Dec 18 17:12:36 CST 2025
--------------------------------------------------
â„¹ï¸ è¯†åˆ«æ¨¡å¼: åŠŸèƒ½æ¨¡å‹ (Function Model)
âœ… è¯­æ³•è§£æé€šè¿‡ (Zero Syntax Errors)

--- [Visitor æ•°æ®æå–ç»“æœ] ---
=== è§£æåŠŸèƒ½æ¨¡å‹: Link16_Control_Handover_Detailed ===
  [å‘ç°å‚ä¸è€…] åç§°: C2_JU_A, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: C2_JU_B, ç±»å‹: C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: Aircraft, ç±»å‹: NON_C2_JU
  [å‘ç°å‚ä¸è€…] åç§°: Operator_A, ç±»å‹: GENERIC_PLATFORM
  [å‘ç°å‚ä¸è€…] åç§°: Operator_B, ç±»å‹: GENERIC_PLATFORM

[é™æ€å®šä¹‰] æ¶ˆæ¯åˆ—è¡¨ (MESSAGES):
  - J10.3
  - J10.5
  - J12.4
  - J9.0
  - J7.1
  - J13.X

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: RC_Field_Values
  |-- Original =0 ("Initial Request")
  |-- Machine_Receipt =2 ("Machine Receipt")
  |-- WILCO =3 ("Will Comply")
  |-- HAVCO =4 ("Have Comply")
  |-- CANTCO =6 ("Cannot Comply")
  |-- CANTPRO =7 ("Cannot Comply - Protocol")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: Request_Field_Values
  |-- Assume_Control_Request =0 ("Assume Control Request (Not Engaging)")
  |-- Assume_Control_Engaging =1 ("Assume Control Request (Engaging)")
  |-- Transfer_Control_Request =2 ("Request for Transfer of Control")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: CCI_Field_Values
  |-- Control_Change_Order =0 ("Control Change Order")
  |-- Control_Request =1 ("Control Request")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: Handover_Indicator_Values
  |-- No_Handover =0 ("No Handover in Progress")
  |-- Handover_In_Progress =1 ("Handover in Progress")

[é™æ€å®šä¹‰] æšä¸¾é›†åˆ: Cancellation_Values
  |-- Not_A_Cancellation =0 ("Not a Cancellation Message")
  |-- Is_A_Cancellation =1 ("Is a Cancellation Message")

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Handover_Active (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: J12_4_Sent_To_Asset (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[é™æ€å®šä¹‰] å…¨å±€çŠ¶æ€: Handover_Complete (ç±»å‹: BOOLEAN) é»˜è®¤å€¼ = FALSE

[è§£ææµç¨‹] Core_Manage_Control_Handover (Manages the entire control handover workflow)
    [è§¦å‘æ¡ä»¶] "Operator_A initiates handover"ORMESSAGE_RECEIVEDJ10.3(RequestForAssumeControl==Transfer_Control_Request)FROMC2_JU_BORMESSAGE_RECEIVEDJ9.0(Command==20)FROMOperator_BORMESSAGE_RECEIVEDJ10.5
    [é€»è¾‘åˆ¤æ–­] IF "Operator_A initiates handover"ORMESSAGE_RECEIVEDJ10.3ORMESSAGE_RECEIVEDJ9.0
      |-- -> èµ‹å€¼æ“ä½œ: Handover_Active = TRUE
      |-- -> èµ‹å€¼æ“ä½œ: J12_4_Sent_To_Asset = FALSE
      |--     [é€»è¾‘åˆ¤æ–­] IF "Operator_A initiates handover"
      |-- è°ƒç”¨å­æµç¨‹: Sub_Handle_Assume_Control_Request
    [é€»è¾‘åˆ¤æ–­] ELSE IF MESSAGE_RECEIVEDJ10.3(RequestForAssumeControl==Transfer_Control_Request)FROMC2_JU_B
      |-- è°ƒç”¨å­æµç¨‹: Sub_Handle_Transfer_Control_Request
    [é€»è¾‘åˆ¤æ–­] ELSE IF MESSAGE_RECEIVEDJ9.0(Command==20)
      |-- è°ƒç”¨å­æµç¨‹: Sub_Alert_Operator
      |-- è°ƒç”¨å­æµç¨‹: Sub_Handle_Assume_Control_Request
    [é€»è¾‘åˆ¤æ–­] ELSE IF MESSAGE_RECEIVEDJ10.5
      |-- è°ƒç”¨å­æµç¨‹: Sub_Process_Incoming_J10_5_Report

[è§£ææµç¨‹] Sub_SendMessage (A generic sub-procedure to send or broadcast a tactical message.)
    (å‚æ•°å®šä¹‰: (Sender:STRING,MessageType:STRING,Params:DICTIONARY,Mode:STRING,Recipient:STRING,ToAddress:STRING))
    [é€»è¾‘åˆ¤æ–­] IF Mode=="SEND"
      |--     -> æ­¥éª¤: SenderSENDSMessageType(Params=Params)TORecipient
    [é€»è¾‘åˆ¤æ–­] ELSE IF Mode=="BROADCAST_TO_ADDRESS"
      |--     -> æ­¥éª¤: SenderBROADCASTSMessageType(Params=Params)TO_ADDRESSToAddress
    [é€»è¾‘åˆ¤æ–­] ELSE
      |--     -> æ­¥éª¤: SenderBROADCASTSMessageType(Params=Params)

[è§£ææµç¨‹] Sub_Alert_Operator (Encapsulates the atomic alert operation)
    (å‚æ•°å®šä¹‰: (Operator:STRING,Message:STRING))
è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator

[è§£ææµç¨‹] Sub_Handle_Assume_Control_Request (Handles the 'Request for Assume Control' sequence (a))
    (å‚æ•°å®šä¹‰: (Initiator:STRING,Receiver:STRING,Asset:STRING))
è°ƒç”¨å­æµç¨‹: Sub_SendMessage

[è§£ææµç¨‹] Sub_Handle_Transfer_Control_Request (Handles the 'Request for Transfer of Control' sequence (b))
    (å‚æ•°å®šä¹‰: (Requester:STRING,CurrentController:STRING,Asset:STRING))

[è§£ææµç¨‹] Sub_Execute_Digital_Handshake (Executes the digital handshake with the asset and network)
    (å‚æ•°å®šä¹‰: (ControllerA:STRING,ControllerB:STRING,Asset:STRING))
è°ƒç”¨å­æµç¨‹: Sub_SendMessage
-> èµ‹å€¼æ“ä½œ: J12_4_Sent_To_Asset = TRUE

[è§£ææµç¨‹] Sub_Handle_Cancellation_By_A (Handles cancellation initiated by Controller A)
    [é€»è¾‘åˆ¤æ–­] IF Handover_Complete==FALSE
      |-- -> èµ‹å€¼æ“ä½œ: Handover_Active = FALSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |-- 
[è§£ææµç¨‹] Sub_Handle_Cancellation_By_B (Handles cancellation initiated by Controller B)
    [é€»è¾‘åˆ¤æ–­] IF Handover_Complete==TRUE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |--     [é€»è¾‘åˆ¤æ–­] IF J12_4_Sent_To_Asset==FALSE
      |-- -> èµ‹å€¼æ“ä½œ: Handover_Active = FALSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |--     [é€»è¾‘åˆ¤æ–­] ELSE
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator
      |-- è°ƒç”¨å­æµç¨‹: Sub_SendMessage
      |-- 
[è§£ææµç¨‹] Sub_Process_Incoming_J10_5_Report (Processes an incoming J10.5 report for duplicate control)
    [é€»è¾‘åˆ¤æ–­] IF GET_CONTROLLER_FOR(ReferenceTN=J10_5.ReferenceTN)!=J10_5.SourceTN
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Update_Controller_For_Track
      |-- è°ƒç”¨å­æµç¨‹: Atomic_Alert_Operator

[è§£ææµç¨‹] Atomic_Alert_Operator (Alerts a human operator)
    (å‚æ•°å®šä¹‰: (Operator:STRING,Message:STRING))
    -> æ­¥éª¤: C2_JU_ANOTIFYMessageTOOperator

[è§£ææµç¨‹] Atomic_Stop_J10_5_Broadcast (Ceases the periodic broadcast of J10.5 for an asset)
    (å‚æ•°å®šä¹‰: (Unit:STRING,Asset:STRING))
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Cease periodic J10.5 transmission.";DESCRIPTION"The specified unit stops its periodic J10.5 broadcast for the given asset, finalizing the handover.";}

[è§£ææµç¨‹] Atomic_Get_Controller_For_Track (Gets the current controller for a given track)
    (å‚æ•°å®šä¹‰: (TN:INTEGER))
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Query local track database for current controller.";DESCRIPTION"The system retrieves the currently assigned controller's TN for the given reference track TN from its local database.";}

[è§£ææµç¨‹] Atomic_Update_Controller_For_Track (Updates the controller for a given track)
    (å‚æ•°å®šä¹‰: (TN:INTEGER,NewController:STRING))
    -> æ­¥éª¤: è‡ªç„¶è¯­è¨€æè¿°: NATURAL_LANGUAGE{INTENT"Update the controller in the local track database.";DESCRIPTION"The system updates its local database, assigning the NewController as the controlling C2 JU for the specified track TN.";}
------------------------------

ğŸ‰ æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼
   - å¯è§†åŒ–å›¾: E:\lht\æ¨¡å‹è½¬æ¢\DSLParser\output\æ­¦å™¨ååŒ.svg
   - è¯¦ç»†æ—¥å¿—: output/æ­¦å™¨ååŒè§£ææ—¥å¿—.txt

